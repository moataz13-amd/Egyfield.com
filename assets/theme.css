/* Catalog page navigation (links to all.html, fresh.html, etc.) */
.catalog-page-nav {
  margin: 8px 0 16px;
  border-bottom: 1px solid var(--border);
}
.catalog-page-nav ul {
  list-style: none;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding: 0;
  margin: 0;
}
.catalog-page-nav li { display: contents; }
.catalog-page-nav a {
  display: inline-block;
  padding: 8px 14px;
  border-radius: 999px;
  border: 1px solid var(--btn-border);
  background: var(--btn-bg);
  color: var(--btn-text);
  text-decoration: none;
}
.catalog-page-nav a:hover { background: var(--btn-hover-bg); }
.catalog-page-nav a.active {
  background: var(--primary);
  color: var(--primary-contrast);
  border-color: var(--primary);
  box-shadow: var(--focus-ring);
}
/*
  EgyField Theme System
  - Light/Dark themes implemented with CSS custom properties
  - Smooth transitions with reduced-motion respect
  - Components covered: navbar, buttons, cards, forms, tables, modals, product grid
*/

/* 1) Base color tokens (Light by default) */
:root {
  /* Surfaces */
  --bg: #ffffff;
  --bg-elev-1: #f7f7f9;
  --bg-elev-2: #efeff3;

  /* Text */
  --text: #111316;
  --text-muted: #5b6270;

  /* Borders & Dividers */
  --border: #dedfe4;

  /* Brand */
  --primary: #0a7d45;         /* EgyField green */
  --primary-contrast: #ffffff;

  /* Controls */
  --btn-bg: var(--bg);
  --btn-text: var(--text);
  --btn-border: var(--border);
  --btn-hover-bg: var(--bg-elev-1);

  /* Components */
  --card-bg: var(--bg);
  --card-border: var(--border);
  --chip-bg: var(--bg-elev-2);
  --chip-text: var(--text);
  --chip-border: var(--border);
  --kpi-bg: var(--card-bg);
  --kpi-border: var(--card-border);

  /* Shadows */
  --shadow-sm: 0 1px 2px rgba(0,0,0,.06);
  --shadow-md: 0 6px 20px rgba(0,0,0,.08);

  /* Misc */
  --focus-ring: 0 0 0 3px rgba(10, 125, 69, .2);
}

/* 2) Dark theme overrides */
html[data-theme="dark"] {
  --bg: #0c0e10;
  --bg-elev-1: #121518;
  --bg-elev-2: #191d22;

  --text: #e6e9ef;
  --text-muted: #b0b8c6; /* brighter muted text for readability */

  --border: #2a2f36;

  --primary: #27b06e;
  --primary-contrast: #03110a;

  --btn-bg: #14171b;
  --btn-text: #e6e9ef;
  --btn-border: #3a414d; /* stronger outline for better contrast */
  --btn-hover-bg: #181c21;

  /* Components (darker surfaces for better separation) */
  --card-bg: var(--bg-elev-1);
  --card-border: #3a414d;
  --chip-bg: var(--bg-elev-2);
  --chip-text: var(--text);
  --chip-border: #3f4754;
  --kpi-bg: var(--bg-elev-2);
  --kpi-border: #475062;

  --shadow-sm: 0 1px 2px rgba(0,0,0,.5);
  --shadow-md: 0 10px 30px rgba(0,0,0,.45);

  --focus-ring: 0 0 0 3px rgba(39, 176, 110, .35);
}

/* Dark mode: Mobile menu toggle + dropdown navbar contrast tweaks */
html[data-theme="dark"] .menu-toggle {
  background: #397e5e;
  color: #000;
  border: 1px solid #222;
  border-radius: 10px;
}
html[data-theme="dark"] #navbar {
  background: #000;
  border-color: #222;
}
html[data-theme="dark"] #navbar a,
html[data-theme="dark"] #navbar button {
  color: #fff;
}
html[data-theme="dark"] #navbar a:hover,
html[data-theme="dark"] #navbar button:hover {
  background: #111;
}

/* 3) Global resets + transitions */
* { box-sizing: border-box; }

html, body {
  height: 100%;
}

body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font: 400 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

/* Smooth color transitions; respect reduced motion */
@media (prefers-reduced-motion: no-preference) {
  html, body, header, main, footer, .card, .btn, input, select, textarea, table, .modal {
    transition: background-color .25s ease, color .25s ease, border-color .25s ease, box-shadow .25s ease;
  }
}

/* 4) Layout: container */
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 16px;
}

/* 5) Navbar */
.navbar {
  background: var(--bg);
  border-bottom: 1px solid var(--border);
  position: sticky;
  top: 0;
  z-index: 50;
}
.navbar .inner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 64px;
}
.navbar .brand {
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: 700;
}
.navbar .nav {
  display: flex;
  align-items: center;
  gap: 14px;
}
.navbar a {
  color: var(--text);
  text-decoration: none;
  padding: 8px 10px;
  border-radius: 8px;
}
.navbar a:hover {
  background: var(--bg-elev-1);
}
.navbar a.active {
  background: var(--bg-elev-1);
  border: 1px solid var(--primary);
  box-shadow: var(--focus-ring);
}

/* Theme toggle button */
#theme-toggle {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 10px;
  border: 1px solid var(--btn-border);
  background: var(--btn-bg);
  color: var(--btn-text);
  cursor: pointer;
}
#theme-toggle:hover { background: var(--btn-hover-bg); }
#theme-toggle:focus-visible { outline: none; box-shadow: var(--focus-ring); }

/* 6) Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 10px 16px;
  border-radius: 12px;
  background: var(--primary);
  color: var(--primary-contrast);
  border: 1px solid transparent;
  box-shadow: var(--shadow-sm);
  cursor: pointer;
}
.btn:hover { filter: brightness(0.98); }
.btn:active { transform: translateY(1px); }
.btn:focus-visible { outline: none; box-shadow: var(--focus-ring); }

.btn-outline {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 10px 16px;
  border-radius: 12px;
  background: var(--btn-bg);
  color: var(--btn-text);
  border: 1px solid var(--btn-border);
  box-shadow: var(--shadow-sm);
  cursor: pointer;
}
.btn-outline:hover { background: var(--btn-hover-bg); }
.btn-outline:focus-visible { outline: none; box-shadow: var(--focus-ring); }

/* Active states for filter buttons and language buttons */
.filters .filter-btn {
  border: 1px solid var(--btn-border);
  background: var(--btn-bg);
  color: var(--btn-text);
  padding: 8px 12px;
  border-radius: 10px;
  cursor: pointer;
}

.lang-toggle a {
  padding-top: 15px;
}

.filter-btn.active {
  background: var(--primary);
  color: var(--primary-contrast);
  border: 1px solid var(--primary);
}
header button[data-lang].active {
  border: 1px solid var(--primary);
  box-shadow: var(--focus-ring);
}

/* 7) Cards */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 16px;
}
.card {
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: 14px;
  overflow: hidden;
  box-shadow: var(--shadow-sm);
  opacity: 1;
  transform: translateY(0);
  transition: opacity .25s ease, transform .25s ease, box-shadow .25s ease;
}
.card:hover { box-shadow: var(--shadow-md); }
.card img { width: 100%; height: auto; display: block; }
.card .body { padding: 12px; }
.card .title { font-size: 1.1rem; font-weight: 700; margin: 0 0 8px; }
.card .muted { color: var(--text-muted); font-size: .9rem; }
.card .actions { display: flex; gap: 8px; margin-top: 10px; }

/* Animated filter helpers */
.card.is-hiding { opacity: 0; transform: translateY(6px); }
.card.is-hidden { display: none !important; }

/* KPI section */
.kpis { display: grid; grid-template-columns: repeat(auto-fit,minmax(160px,1fr)); gap: 12px; }
.kpi {
  background: var(--kpi-bg);
  border: 1px solid var(--kpi-border);
  border-radius: 14px;
  padding: 14px 16px;
  box-shadow: var(--shadow-sm);
}
.kpi:hover { box-shadow: var(--shadow-md); }
.kpi .title { font-size: 1.1rem; font-weight: 700; margin: 0 0 8px; }
.kpi .value { font-size: 2.2rem; font-weight: 700; }
.kpi .description { color: var(--text-muted); font-size: .9rem; }

/* 8) Forms */
.form {
  display: grid;
  gap: 12px;
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 16px;
}
.label { color: var(--text-muted); font-size: .9rem; }
.input, .select, .textarea {
  width: 100%;
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--bg);
  color: var(--text);
}
.input:focus, .select:focus, .textarea:focus { outline: none; box-shadow: var(--focus-ring); }

/* 9) Table */
.table {
  width: 100%;
  border-collapse: collapse;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
}
.table th, .table td { padding: 10px 12px; border-bottom: 1px solid var(--border); text-align: left; }
.table thead th { background: var(--bg-elev-1); color: var(--text); }
.table tbody tr:hover { background: var(--bg-elev-1); }

/* 10) Modal */
.modal-backdrop {
  position: fixed; inset: 0; background: rgba(0,0,0,.45);
  display: none; align-items: center; justify-content: center;
}
.modal {
  background: var(--bg);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 16px;
  width: min(560px, 92vw);
  box-shadow: var(--shadow-md);
}
.modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
.modal-title { font-weight: 700; }
.modal-close { background: none; border: none; color: var(--text); font-size: 22px; cursor: pointer; }

.modal-backdrop.show { display: flex; }

/* 11) Utilities */
.muted { color: var(--text-muted); }
.section { padding: 24px 0; }
.badge { display: inline-block; padding: 2px 8px; border-radius: 999px; background: var(--bg-elev-2); color: var(--text-muted); border: 1px solid var(--border); }

/* 12) Product grid compatibility helpers (if the site already has .card/.btn etc.) */
/* These ensure existing classes still look good in dark mode if they rely on basic colors */
.header, header, footer { background: var(--bg); color: var(--text); border-color: var(--border); }
.header, header {
  position: sticky;
  top: 0;
  z-index: 1000;
  backdrop-filter: saturate(150%) blur(6px);
  border-bottom: 1px solid var(--border);
  box-shadow: 0 2px 10px rgba(0,0,0,.06);
}
/* Ensure in-page anchors account for sticky header */
section { scroll-margin-top: 90px; }
/* Specifically ensure catalog is fully visible when navigating to #catalog */
#catalog { scroll-margin-top: 100px; }
.actions-row { display: flex; gap: 8px; margin-top: 10px; }
.chip { display: inline-block; padding: 4px 8px; border-radius: 999px; background: var(--chip-bg); color: var(--chip-text); border: 1px solid var(--chip-border); font-size: .8rem; }

/* 13) Floating Theme Toggle (FAB) */
.theme-fab {
  position: fixed;
  right: 16px;
  bottom: 88px; /* sit above WhatsApp FAB */
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  border-radius: 999px;
  border: 1px solid var(--btn-border);
  background: var(--btn-bg);
  color: var(--btn-text);
  box-shadow: var(--shadow-md);
  cursor: pointer;
  z-index: 1000;
}
.theme-fab:hover { background: var(--btn-hover-bg); }
.theme-fab:focus-visible { outline: none; box-shadow: var(--focus-ring); }
